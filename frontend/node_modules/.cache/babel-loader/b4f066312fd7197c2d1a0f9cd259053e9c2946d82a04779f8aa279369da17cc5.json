{"ast":null,"code":"import { Client } from '@stomp/stompjs';\nconst WebSocketService = onMessageCallback => {\n  const client = new Client({\n    brokerURL: 'ws://localhost:8080/ws',\n    // Your WebSocket endpoint\n    debug: function (str) {\n      console.log(str);\n    },\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000\n  });\n  const connect = () => {\n    client.activate();\n    console.log('Connecting to WebSocket...');\n  };\n  const disconnect = () => {\n    client.deactivate();\n  };\n  const subscribeToClass = className => {\n    if (!client.connected) {\n      console.error('WebSocket not connected');\n      return null;\n    }\n    const subscription = client.subscribe(`/user/queue/notifications`, message => {\n      onMessageCallback(JSON.parse(message.body));\n      console.log('Received message:', JSON.parse(message.body));\n    });\n    return subscription;\n  };\n  client.onConnect = () => {\n    console.log('WebSocket connected');\n    // Subscribe to the class (replace 'ClassName' with the actual class name)\n    subscribeToClass('ClassName');\n  };\n  client.onDisconnect = () => {\n    console.log('WebSocket disconnected');\n  };\n  client.onStompError = frame => {\n    console.error('WebSocket error:', frame.headers.message);\n  };\n  return {\n    connect,\n    disconnect\n  };\n};\n_c = WebSocketService;\nexport default WebSocketService;\nvar _c;\n$RefreshReg$(_c, \"WebSocketService\");","map":{"version":3,"names":["Client","WebSocketService","onMessageCallback","client","brokerURL","debug","str","console","log","reconnectDelay","heartbeatIncoming","heartbeatOutgoing","connect","activate","disconnect","deactivate","subscribeToClass","className","connected","error","subscription","subscribe","message","JSON","parse","body","onConnect","onDisconnect","onStompError","frame","headers","_c","$RefreshReg$"],"sources":["/home/miguel/Documentos/IES/Projeto1/IES_eDuca/frontend/src/WebSocketService.js"],"sourcesContent":["import { Client } from '@stomp/stompjs';\n\nconst WebSocketService = (onMessageCallback) => {\n  const client = new Client({\n    brokerURL: 'ws://localhost:8080/ws', // Your WebSocket endpoint\n    debug: function (str) {\n      console.log(str);\n    },\n    reconnectDelay: 5000,\n    heartbeatIncoming: 4000,\n    heartbeatOutgoing: 4000,\n  });\n\n  const connect = () => {\n    client.activate();\n    console.log('Connecting to WebSocket...');\n  };\n\n  const disconnect = () => {\n    client.deactivate();\n  };\n\n  const subscribeToClass = (className) => {\n    if (!client.connected) {\n      console.error('WebSocket not connected');\n      return null;\n    }\n\n    const subscription = client.subscribe(`/user/queue/notifications`, (message) => {\n      onMessageCallback(JSON.parse(message.body));\n      console.log('Received message:', JSON.parse(message.body));\n    });\n\n    return subscription;\n  };\n\n  client.onConnect = () => {\n    console.log('WebSocket connected');\n    // Subscribe to the class (replace 'ClassName' with the actual class name)\n    subscribeToClass('ClassName');\n  };\n\n  client.onDisconnect = () => {\n    console.log('WebSocket disconnected');\n  };\n\n  client.onStompError = (frame) => {\n    console.error('WebSocket error:', frame.headers.message);\n  };\n\n  return { connect, disconnect };\n};\n\nexport default WebSocketService;\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,gBAAgB;AAEvC,MAAMC,gBAAgB,GAAIC,iBAAiB,IAAK;EAC9C,MAAMC,MAAM,GAAG,IAAIH,MAAM,CAAC;IACxBI,SAAS,EAAE,wBAAwB;IAAE;IACrCC,KAAK,EAAE,SAAAA,CAAUC,GAAG,EAAE;MACpBC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC;IAClB,CAAC;IACDG,cAAc,EAAE,IAAI;IACpBC,iBAAiB,EAAE,IAAI;IACvBC,iBAAiB,EAAE;EACrB,CAAC,CAAC;EAEF,MAAMC,OAAO,GAAGA,CAAA,KAAM;IACpBT,MAAM,CAACU,QAAQ,CAAC,CAAC;IACjBN,OAAO,CAACC,GAAG,CAAC,4BAA4B,CAAC;EAC3C,CAAC;EAED,MAAMM,UAAU,GAAGA,CAAA,KAAM;IACvBX,MAAM,CAACY,UAAU,CAAC,CAAC;EACrB,CAAC;EAED,MAAMC,gBAAgB,GAAIC,SAAS,IAAK;IACtC,IAAI,CAACd,MAAM,CAACe,SAAS,EAAE;MACrBX,OAAO,CAACY,KAAK,CAAC,yBAAyB,CAAC;MACxC,OAAO,IAAI;IACb;IAEA,MAAMC,YAAY,GAAGjB,MAAM,CAACkB,SAAS,CAAE,2BAA0B,EAAGC,OAAO,IAAK;MAC9EpB,iBAAiB,CAACqB,IAAI,CAACC,KAAK,CAACF,OAAO,CAACG,IAAI,CAAC,CAAC;MAC3ClB,OAAO,CAACC,GAAG,CAAC,mBAAmB,EAAEe,IAAI,CAACC,KAAK,CAACF,OAAO,CAACG,IAAI,CAAC,CAAC;IAC5D,CAAC,CAAC;IAEF,OAAOL,YAAY;EACrB,CAAC;EAEDjB,MAAM,CAACuB,SAAS,GAAG,MAAM;IACvBnB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IAClC;IACAQ,gBAAgB,CAAC,WAAW,CAAC;EAC/B,CAAC;EAEDb,MAAM,CAACwB,YAAY,GAAG,MAAM;IAC1BpB,OAAO,CAACC,GAAG,CAAC,wBAAwB,CAAC;EACvC,CAAC;EAEDL,MAAM,CAACyB,YAAY,GAAIC,KAAK,IAAK;IAC/BtB,OAAO,CAACY,KAAK,CAAC,kBAAkB,EAAEU,KAAK,CAACC,OAAO,CAACR,OAAO,CAAC;EAC1D,CAAC;EAED,OAAO;IAAEV,OAAO;IAAEE;EAAW,CAAC;AAChC,CAAC;AAACiB,EAAA,GAjDI9B,gBAAgB;AAmDtB,eAAeA,gBAAgB;AAAC,IAAA8B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}